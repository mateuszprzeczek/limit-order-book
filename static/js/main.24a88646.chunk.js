(this["webpackJsonporder-book"]=this["webpackJsonporder-book"]||[]).push([[0],{23:function(t,e,i){},30:function(t,e,i){},31:function(t,e,i){"use strict";i.r(e);var c=i(1),n=i(0),a=i.n(n),r=i(10),s=i.n(r),u=(i(23),i(4)),o=i(8),l=i(2),j=i(11),b=i(3),d=function(t,e,i){var a=Object(n.useState)(t),r=Object(u.a)(a,2),s=r[0],o=r[1],l="use-dropdown-".concat(e);return[s,function(){return Object(c.jsxs)("label",{htmlFor:l,children:[e,Object(c.jsx)("select",{id:l,value:s,onChange:function(t){return o(t.target.value)},onBlur:function(t){return o(t.target.value)},children:i.map((function(t){return Object(c.jsx)("option",{value:t,children:t},t)}))})]})},o]},O=i(14),f=i(15),v=i(17),y=i(16),m=function(t){Object(v.a)(i,t);var e=Object(y.a)(i);function i(){return Object(O.a)(this,i),e.apply(this,arguments)}return Object(f.a)(i,[{key:"render",value:function(){var t=this.props,e=t.label,i=t.state,n=t.setState,a=t.type,r=void 0===a?"text":a,s="component-input-".concat(e);return Object(c.jsxs)("label",{htmlFor:s,children:[e,Object(c.jsx)("input",{id:s,type:r,value:i,placeholder:"",onChange:function(t){return n(t.target.value)}})]})}}]),i}(a.a.Component),h=function(t){var e=t.orders,i=t.setOrders,a=t.buyers,r=t.setBuyers,s=t.sellers,o=t.setSellers,O=Object(n.useState)(""),f=Object(u.a)(O,2),v=f[0],y=f[1],h=Object(n.useState)(""),q=Object(u.a)(h,2),g=q[0],p=q[1],x=Object(n.useState)(""),P=Object(u.a)(x,2),S=P[0],F=P[1],B=Object(n.useState)(!0),k=Object(u.a)(B,2),w=(k[0],k[1],Object(n.useState)("OK")),C=Object(u.a)(w,2),I=C[0],N=(C[1],d("Buy","Side",["Buy","Sell","Cancel"])),L=Object(u.a)(N,2),D=L[0],J=L[1],K=function(t){if("Buy"===t.side){var e=[].concat(Object(b.a)(a),[t]);r(e),M(t)}if("Sell"===t.side){var i=[].concat(Object(b.a)(s),[t]);o(i),T(t)}"Cancel"===t.side&&E(t.id)},M=function(t){if(s.length){var e=s.slice().filter((function(e){return parseInt(e.limitPrice)<=parseInt(t.limitPrice)}));A(e);var i,c=Object(j.a)(e);try{var n=function(){var e=i.value;if(e.quantity<=t.quantity&&e.active){var c=t.quantity-e.quantity;if(c<0)return"continue";var n=Object(l.a)(Object(l.a)({},t),{},{quantity:c,active:0!==c,message:"Fully matched with ".concat(e.id," ").concat(e.quantity," @ ").concat(e.limitPrice," ")}),u=Object(l.a)(Object(l.a)({},e),{},{quantity:0,active:!1}),j=s.filter((function(t){return t.id!==e.id})),d=[].concat(Object(b.a)(j),[u]);o(d);var O=a.filter((function(e){return e.id!==t.id})),f=[].concat(Object(b.a)(O),[n]);r(f)}if(e.quantity>t.quantity&&e.active){var v=e.quantity-t.quantity;if(v<0)return"continue";var y=Object(l.a)(Object(l.a)({},t),{},{quantity:0,active:!1,message:"Fully matched with ".concat(e.id," ").concat(e.quantity," @ ").concat(e.limitPrice," ")}),m=Object(l.a)(Object(l.a)({},e),{},{quantity:v,active:0!==v}),h=s.filter((function(t){return t.id!==e.id})),q=[].concat(Object(b.a)(h),[m]);o(q);var g=a.filter((function(e){return e.id!==t.id})),p=[].concat(Object(b.a)(g),[y]);r(p)}};for(c.s();!(i=c.n()).done;)n()}catch(u){c.e(u)}finally{c.f()}}},T=function(t){if(a.length){var e=a.slice().filter((function(e){return parseInt(e.limitPrice)>=parseInt(t.limitPrice)}));A(e);var i,c=Object(j.a)(e);try{var n=function(){var e=i.value;if(e.quantity<=t.quantity&&e.active){var c=t.quantity-e.quantity;if(c<0)return"continue";var n=Object(l.a)(Object(l.a)({},t),{},{quantity:c,message:"Fully matched with ".concat(e.id," ").concat(e.quantity," @ ").concat(e.limitPrice),active:0!==c}),u=Object(l.a)(Object(l.a)({},e),{},{quantity:0,active:!1}),j=a.filter((function(t){return t.id!==e.id})),d=[].concat(Object(b.a)(j),[u]);r(d);var O=s.filter((function(e){return e.id!==t.id})),f=[].concat(Object(b.a)(O),[n]);o(f)}if(e.quantity>t.quantity&&e.active){var v=e.quantity-t.quantity;if(v<0)return"continue";var y=Object(l.a)(Object(l.a)({},t),{},{quantity:0,active:!1,message:"Fully matched with ".concat(e.id," ").concat(e.quantity," @ ").concat(e.limitPrice)}),m=Object(l.a)(Object(l.a)({},e),{},{quantity:v,active:0!==v}),h=a.filter((function(t){return t.id!==e.id})),q=[].concat(Object(b.a)(h),[m]);r(q);var g=s.filter((function(e){return e.id!==t.id})),p=[].concat(Object(b.a)(g),[y]);o(p)}};for(c.s();!(i=c.n()).done;)n()}catch(u){c.e(u)}finally{c.f()}}},A=function(t){t.sort((function(t,e){return t.quantity-e.quantity}))},E=function(t){var e=a.filter((function(e){return e.id===t}));console.log("cancel buyer ",e);var i=a.filter((function(e){return e.id!==t}));if(console.log("cancel  newBuyers",i),!e.active){var c=Object(l.a)(Object(l.a)({},e),{},{message:"Failed - no such active order"}),n=[].concat(Object(b.a)(i),[c]);r(n)}if(e.active&&0!==e.quantity){var u=Object(l.a)(Object(l.a)({},e),{},{active:!1,message:"OK"}),j=[].concat(Object(b.a)(i),[u]);r(j)}if(0===e.quantity){var d=Object(l.a)(Object(l.a)({},e),{},{message:"Failed - already fully filled"}),O=[].concat(Object(b.a)(i),[d]);r(O)}o(s.filter((function(e){return e.id!==t})))};return Object(c.jsxs)("div",{children:[v,Object(c.jsxs)("form",{children:[Object(c.jsx)(m,{label:"id",state:v,setState:y}),Object(c.jsx)(J,{}),Object(c.jsx)(m,{label:"quantity",state:S,setState:F,type:"number"}),Object(c.jsx)(m,{label:"LimitPrice",state:g,type:"number",setState:p}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{onClick:function(t){t.preventDefault(),t.stopPropagation();var c={id:v,side:D,limitPrice:g,quantity:S,message:I,active:!0},n=[].concat(Object(b.a)(e),[c]);i(n),K(c)}.bind(undefined),children:"Dodaj"})]})]})},q=function(t){var e=t.id,i=t.side,n=t.limitPrice,a=t.quantity,r=t.message;return Object(c.jsx)("div",{children:Object(c.jsxs)("h2",{children:[" ",e," ",i," ",a," @ ",n," ",r]})})},g=function(t){var e=t.orders,i=e.map((function(t){return Object(c.jsx)(q,{id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:t.quantity},t.id)}));return Object(c.jsxs)(a.a.Fragment,{children:[0===e.length?Object(c.jsx)("h3",{children:"No Orders"}):i,Object(c.jsx)(o.a,{to:"/",children:"Menage orders"})]})};i(30);var p=function(){var t=Object(n.useState)([]),e=Object(u.a)(t,2),i=e[0],a=e[1],r=Object(n.useState)([]),s=Object(u.a)(r,2),l=s[0],j=s[1],b=Object(n.useState)([]),d=Object(u.a)(b,2),O=d[0],f=d[1];console.log("orders   ",i),console.log("sellers   ",O),i.map((function(t){return console.log(t),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)(q,{id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:t.quantity,message:t.message}),Object(c.jsx)("hr",{})]},t.id)}));var v=l.map((function(t){return console.log("buyer",t),Object(c.jsxs)("div",{className:"buyer",children:[Object(c.jsx)(q,{id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:t.quantity,message:t.message}),Object(c.jsx)("hr",{})]},t.id)})),y=O.map((function(t){return console.log("seller",t),Object(c.jsx)("div",{className:"seller",children:Object(c.jsx)(q,{id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:t.quantity,message:t.message})},t.id)}));return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(o.a,{to:"/limit-order-book",children:Object(c.jsx)("h1",{children:"Limit Order Book v1"})}),Object(c.jsxs)(o.b,{children:[Object(c.jsx)(h,{orders:i,setOrders:a,buyers:l,setBuyers:j,sellers:O,setSellers:f,path:"/limit-order-book"}),Object(c.jsx)(g,{orders:i,path:"/"})]}),v,y]})},x=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,32)).then((function(e){var i=e.getCLS,c=e.getFID,n=e.getFCP,a=e.getLCP,r=e.getTTFB;i(t),c(t),n(t),a(t),r(t)}))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),x()}},[[31,1,2]]]);
//# sourceMappingURL=main.24a88646.chunk.js.map