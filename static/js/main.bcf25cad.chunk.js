(this["webpackJsonporder-book"]=this["webpackJsonporder-book"]||[]).push([[0],{22:function(t,e,i){},29:function(t,e,i){},30:function(t,e,i){"use strict";i.r(e);var c=i(1),a=i(0),n=i.n(a),r=i(9),s=i.n(r),l=(i(22),i(2)),o=i(7),u=i(10),d=i(3),j=function(t,e,i){var n=Object(a.useState)(t),r=Object(l.a)(n,2),s=r[0],o=r[1],u="use-dropdown-".concat(e);return[s,function(){return Object(c.jsxs)("label",{htmlFor:u,children:[e,Object(c.jsx)("select",{id:u,value:s,onChange:function(t){return o(t.target.value)},onBlur:function(t){return o(t.target.value)},children:i.map((function(t){return Object(c.jsx)("option",{value:t,children:t},t)}))})]})},o]},b=i(13),f=i(14),m=i(16),O=i(15),v=function(t){Object(m.a)(i,t);var e=Object(O.a)(i);function i(){return Object(b.a)(this,i),e.apply(this,arguments)}return Object(f.a)(i,[{key:"render",value:function(){var t=this.props,e=t.label,i=t.state,a=t.setState,n=t.type,r=void 0===n?"text":n,s="component-input-".concat(e);return Object(c.jsxs)("label",{htmlFor:s,children:[e,Object(c.jsx)("input",{id:s,type:r,value:i,placeholder:"",onChange:function(t){return a(t.target.value)}})]})}}]),i}(n.a.Component),h=function(t){var e=t.orders,i=t.setOrders,n=(t.buyers,t.setBuyers,Object(a.useState)("")),r=Object(l.a)(n,2),s=r[0],o=r[1],b=Object(a.useState)(""),f=Object(l.a)(b,2),m=f[0],O=f[1],h=Object(a.useState)(""),y=Object(l.a)(h,2),P=y[0],g=y[1],x=Object(a.useState)(!0),q=Object(l.a)(x,2),p=(q[0],q[1],Object(a.useState)("OK")),S=Object(l.a)(p,2),k=S[0],w=(S[1],Object(a.useState)([])),F=Object(l.a)(w,2),B=(F[0],F[1],j("Buy","Side",["Buy","Sell","Cancel"])),C=Object(l.a)(B,2),I=C[0],L=C[1],M=function(t){t.sort((function(t,e){return e.limitPrice-t.limitPrice}))},N=function(t){var c=e.filter((function(e){return e.id===t}))[0];console.log("cancel order ",c);var a=e.filter((function(e){return e.id!==t}));if(console.log("cancel  newOrders",a),!c.active){var n={id:c.id,side:c.side,limitPrice:c.limitPrice,quantity:c.quantity,active:!1,message:"Failed - no such active order"},r=[].concat(Object(d.a)(a),[n]);i(r)}if(c.active&&parseInt(c.quantity)>0){var s={id:c.id,side:c.side,limitPrice:c.limitPrice,quantity:c.quantity,active:!1,message:"".concat(c.id," Cancelled")},l=[].concat(Object(d.a)(a),[s]);i(l)}if(0===parseInt(c.quantity)){var o={id:c.id,side:c.side,limitPrice:c.limitPrice,quantity:c.quantity,active:!1,message:"Failed - already fully filled"},u=[].concat(Object(d.a)(a),[o]);i(u)}};return Object(c.jsxs)("div",{children:[s,Object(c.jsxs)("form",{children:[Object(c.jsx)(v,{label:"id",state:s,setState:o}),Object(c.jsx)(L,{}),Object(c.jsx)(v,{label:"quantity",state:P,setState:g,type:"number"}),Object(c.jsx)(v,{label:"LimitPrice",state:m,type:"number",setState:O}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{onClick:function(t){t.preventDefault(),t.stopPropagation();var c={id:s,side:I,limitPrice:m,quantity:P,message:k,active:!0};if("Buy"===c.side){if(!e.length){var a=[].concat(Object(d.a)(e),[c]);i(a)}var n=e.filter((function(t){return t.active})).filter((function(t){return t.limitPrice<=c.limitPrice})).filter((function(t){return"Sell"===t.side}));if(n.length){M(n);var r,l=n.length,o=0,j=null,b=[],f=null,O=[],v=Object(u.a)(n);try{var h=function(){var t=r.value;if(0===c.quantity)return"break";if(t.limitPrice<=c.limitPrice){for(var a=t.quantity,n=c.quantity,s=Math.max(a,n),l=0;l<=s&&(a--,0!==--n&&0!==a);l++);if(0===a){b=e.filter((function(e){return e.id!==t.id}));var u="fully matched with ".concat(t.id," (").concat(t.quantity," @ ").concat(t.limitPrice,")");f={id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:0,message:"Fully matched with ".concat(c.id),active:!1},c.quantity=n,c.message=" ".concat(u),O=[].concat(Object(d.a)(b),[f,c]),i(O)}if(0===n){b=e.filter((function(e){return e.id!==t.id}));var m=null;m=a>0?"and ".concat(t.id," (").concat(a-n," @ ").concat(t.limitPrice,")"):"and ".concat(t.id," (").concat(a," @ ").concat(t.limitPrice,")"),f={id:t.id,side:t.side,limitPrice:t.limitPrice,active:!0,quantity:a,message:""},c.quantity=n,j={id:c.id,side:c.side,limitPrice:c.limitPrice,quantity:n,message:" ".concat(m),active:!1},O=[].concat(Object(d.a)(b),[f,j]),i(O)}}else o+=1};for(v.s();!(r=v.n()).done;){if("break"===h())break}}catch(A){v.e(A)}finally{v.f()}if(o===l){var y=[].concat(Object(d.a)(e),[c]);i(y)}}else{var g=[].concat(Object(d.a)(e),[c]);i(g)}}if("Sell"===c.side){if(!e.length){var x=[].concat(Object(d.a)(e),[c]);i(x)}var q=e.filter((function(t){return t.active})).filter((function(t){return t.limitPrice>=c.limitPrice})).filter((function(t){return"Buy"===t.side}));if(e.length){M(q);var p,S=q.length,w=0,F=null,B=[],C=null,L=[],D=Object(u.a)(q);try{var J=function(){var t=p.value;if(0===c.quantity)return"break";if(t.limitPrice>=c.limitPrice){for(var a=t.quantity,n=c.quantity,r=Math.max(a,n),s=0;s<=r&&(a--,0!==--n&&0!==a);s++);if(0===a){B=e.filter((function(e){return e.id!==t.id}));var l="Partially matched with ".concat(t.id," (").concat(t.quantity," @ ").concat(t.limitPrice,")");C={id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:0,message:"Fully matched with ".concat(c.id),active:!1},c.quantity=n,c.message="".concat(c.message," ").concat(l);var o=[].concat(Object(d.a)(B),[C,c]);i(o)}if(0===n){B=e.filter((function(e){return e.id!==t.id}));var u=null;u=a>0?"fully matched witch ".concat(t.id," (").concat(c.quantity," @ ").concat(t.limitPrice,")"):"and ".concat(t.id," (").concat(a," @ ").concat(t.limitPrice,")"),C={id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:a,message:"",active:!0},F={id:c.id,side:c.side,limitPrice:c.limitPrice,quantity:n,message:" ".concat(c.message," ").concat(u),active:!1},L=[].concat(Object(d.a)(B),[C,F]),i(L)}}else w+=1};for(D.s();!(p=D.n()).done;){if("break"===J())break}}catch(A){D.e(A)}finally{D.f()}if(w===S){var T=[].concat(Object(d.a)(e),[c]);i(T)}}}"Cancel"===c.side&&N(c.id)}.bind(undefined),children:"Dodaj"})]})]})},y=function(t){var e=t.id,i=t.side,a=t.limitPrice,n=t.quantity,r=t.message;return Object(c.jsx)("div",{children:Object(c.jsxs)("h2",{children:[" ",e," ",i," ",n," @ ",a," ",r]})})},P=function(t){var e=t.orders,i=e.map((function(t){return Object(c.jsx)(y,{id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:t.quantity},t.id)}));return Object(c.jsxs)(n.a.Fragment,{children:[0===e.length?Object(c.jsx)("h3",{children:"No Orders"}):i,Object(c.jsx)(o.a,{to:"/",children:"Menage orders"})]})};i(29);var g=function(){var t=Object(a.useState)([]),e=Object(l.a)(t,2),i=e[0],n=e[1],r=Object(a.useState)([]),s=Object(l.a)(r,2),u=s[0],d=s[1],j=Object(a.useState)([]),b=Object(l.a)(j,2),f=b[0],m=b[1];console.log("orders   ",i),console.log("sellers   ",f);var O=i.map((function(t){return Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)(y,{id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:t.quantity,message:t.message}),Object(c.jsx)("hr",{})]},t.id)}));return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(o.a,{to:"/limit-order-book",children:Object(c.jsx)("h1",{children:"Limit Order Book v1"})}),Object(c.jsxs)(o.b,{children:[Object(c.jsx)(h,{orders:i,setOrders:n,buyers:u,setBuyers:d,sellers:f,setSellers:m,path:"/limit-order-book"}),Object(c.jsx)(P,{orders:i,path:"/"})]}),O,Object(c.jsx)("div",{className:"row"})]})},x=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,31)).then((function(e){var i=e.getCLS,c=e.getFID,a=e.getFCP,n=e.getLCP,r=e.getTTFB;i(t),c(t),a(t),n(t),r(t)}))};s.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root")),x()}},[[30,1,2]]]);
//# sourceMappingURL=main.bcf25cad.chunk.js.map