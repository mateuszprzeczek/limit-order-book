(this["webpackJsonporder-book"]=this["webpackJsonporder-book"]||[]).push([[0],{23:function(t,e,i){},30:function(t,e,i){},31:function(t,e,i){"use strict";i.r(e);var c=i(1),n=i(0),a=i.n(n),r=i(11),s=i.n(r),l=(i(23),i(4)),o=i(8),u=(i(2),i(9)),d=i(3),j=function(t,e,i){var a=Object(n.useState)(t),r=Object(l.a)(a,2),s=r[0],o=r[1],u="use-dropdown-".concat(e);return[s,function(){return Object(c.jsxs)("label",{htmlFor:u,children:[e,Object(c.jsx)("select",{id:u,value:s,onChange:function(t){return o(t.target.value)},onBlur:function(t){return o(t.target.value)},children:i.map((function(t){return Object(c.jsx)("option",{value:t,children:t},t)}))})]})},o]},b=i(14),f=i(15),m=i(17),O=i(16),v=function(t){Object(m.a)(i,t);var e=Object(O.a)(i);function i(){return Object(b.a)(this,i),e.apply(this,arguments)}return Object(f.a)(i,[{key:"render",value:function(){var t=this.props,e=t.label,i=t.state,n=t.setState,a=t.type,r=void 0===a?"text":a,s="component-input-".concat(e);return Object(c.jsxs)("label",{htmlFor:s,children:[e,Object(c.jsx)("input",{id:s,type:r,value:i,placeholder:"",onChange:function(t){return n(t.target.value)}})]})}}]),i}(a.a.Component),h=function(t){var e=t.orders,i=t.setOrders,a=(t.buyers,t.setBuyers,Object(n.useState)("")),r=Object(l.a)(a,2),s=r[0],o=r[1],b=Object(n.useState)(""),f=Object(l.a)(b,2),m=f[0],O=f[1],h=Object(n.useState)(""),y=Object(l.a)(h,2),P=y[0],g=y[1],x=Object(n.useState)(!0),p=Object(l.a)(x,2),q=(p[0],p[1],Object(n.useState)("OK")),S=Object(l.a)(q,2),k=S[0],w=(S[1],Object(n.useState)([])),B=Object(l.a)(w,2),F=(B[0],B[1],j("Buy","Side",["Buy","Sell","Cancel"])),C=Object(l.a)(F,2),L=C[0],M=C[1],N=function(t){t.sort((function(t,e){return e.limitPrice-t.limitPrice}))};return Object(c.jsxs)("div",{children:[s,Object(c.jsxs)("form",{children:[Object(c.jsx)(v,{label:"id",state:s,setState:o}),Object(c.jsx)(M,{}),Object(c.jsx)(v,{label:"quantity",state:P,setState:g,type:"number"}),Object(c.jsx)(v,{label:"LimitPrice",state:m,type:"number",setState:O}),Object(c.jsx)("br",{}),Object(c.jsx)("button",{onClick:function(t){t.preventDefault(),t.stopPropagation();var c={id:s,side:L,limitPrice:m,quantity:P,message:k,active:!0};if("Buy"===c.side){if(!e.length){var n=[].concat(Object(d.a)(e),[c]);i(n)}var a=e.filter((function(t){return t.active})).filter((function(t){return t.limitPrice<=c.limitPrice})).filter((function(t){return"Sell"===t.side}));if(a.length){N(a);var r,l=a.length,o=0,j=null,b=[],f=null,O=[],v=Object(u.a)(a);try{var h=function(){var t=r.value;if(0===c.quantity)return"break";if(t.limitPrice<=c.limitPrice){for(var n=t.quantity,a=c.quantity,s=Math.max(n,a),l=0;l<=s&&(n--,0!==--a&&0!==n);l++);if(0===n){b=e.filter((function(e){return e.id!==t.id}));var u="fully matched with ".concat(t.id," (").concat(t.quantity," @ ").concat(t.limitPrice,")");f={id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:0,message:"Fully matched with ".concat(c.id),active:!1},c.quantity=a,c.message=" ".concat(u),O=[].concat(Object(d.a)(b),[f,c]),i(O)}if(0===a){b=e.filter((function(e){return e.id!==t.id}));var m=null;m=n>0?"and ".concat(t.id," (").concat(n-a," @ ").concat(t.limitPrice,")"):"and ".concat(t.id," (").concat(n," @ ").concat(t.limitPrice,")"),f={id:t.id,side:t.side,limitPrice:t.limitPrice,active:!0,quantity:n,message:""},c.quantity=a,j={id:c.id,side:c.side,limitPrice:c.limitPrice,quantity:a,message:" ".concat(m),active:!1},O=[].concat(Object(d.a)(b),[f,j]),i(O)}}else o+=1};for(v.s();!(r=v.n()).done;){if("break"===h())break}}catch(A){v.e(A)}finally{v.f()}if(o===l){var y=[].concat(Object(d.a)(e),[c]);i(y)}}else{var g=[].concat(Object(d.a)(e),[c]);i(g)}}if("Sell"===c.side){if(!e.length){var x=[].concat(Object(d.a)(e),[c]);i(x)}var p=e.filter((function(t){return t.active})).filter((function(t){return t.limitPrice>=c.limitPrice})).filter((function(t){return"Buy"===t.side}));if(e.length){N(p);var q,S=p.length,w=0,B=null,F=[],C=null,M=[],D=Object(u.a)(p);try{var I=function(){var t=q.value;if(0===c.quantity)return"break";if(t.limitPrice>=c.limitPrice){for(var n=t.quantity,a=c.quantity,r=Math.max(n,a),s=0;s<=r&&(n--,0!==--a&&0!==n);s++);if(0===n){F=e.filter((function(e){return e.id!==t.id}));var l="Partially matched with ".concat(t.id," (").concat(t.quantity," @ ").concat(t.limitPrice,")");C={id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:0,message:"Fully matched with ".concat(c.id),active:!1},c.quantity=a,c.message="".concat(c.message," ").concat(l);var o=[].concat(Object(d.a)(F),[C,c]);i(o)}if(0===a){F=e.filter((function(e){return e.id!==t.id}));var u=null;u=n>0?"fully matched witch ".concat(t.id," (").concat(c.quantity," @ ").concat(t.limitPrice,")"):"and ".concat(t.id," (").concat(n," @ ").concat(t.limitPrice,")"),C={id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:n,message:"",active:!0},B={id:c.id,side:c.side,limitPrice:c.limitPrice,quantity:a,message:" ".concat(c.message," ").concat(u),active:!1},M=[].concat(Object(d.a)(F),[C,B]),i(M)}}else w+=1};for(D.s();!(q=D.n()).done;){if("break"===I())break}}catch(A){D.e(A)}finally{D.f()}if(w===S){var J=[].concat(Object(d.a)(e),[c]);i(J)}}else{var T=[].concat(Object(d.a)(e),[c]);i(T)}}}.bind(undefined),children:"Dodaj"})]})]})},y=function(t){var e=t.id,i=t.side,n=t.limitPrice,a=t.quantity,r=t.message;return Object(c.jsx)("div",{children:Object(c.jsxs)("h2",{children:[" ",e," ",i," ",a," @ ",n," ",r]})})},P=function(t){var e=t.orders,i=e.map((function(t){return Object(c.jsx)(y,{id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:t.quantity},t.id)}));return Object(c.jsxs)(a.a.Fragment,{children:[0===e.length?Object(c.jsx)("h3",{children:"No Orders"}):i,Object(c.jsx)(o.a,{to:"/",children:"Menage orders"})]})};i(30);var g=function(){var t=Object(n.useState)([]),e=Object(l.a)(t,2),i=e[0],a=e[1],r=Object(n.useState)([]),s=Object(l.a)(r,2),u=s[0],d=s[1],j=Object(n.useState)([]),b=Object(l.a)(j,2),f=b[0],m=b[1];console.log("orders   ",i),console.log("sellers   ",f);var O=i.map((function(t){return Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)(y,{id:t.id,side:t.side,limitPrice:t.limitPrice,quantity:t.quantity,message:t.message}),Object(c.jsx)("hr",{})]},t.id)}));return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(o.a,{to:"/limit-order-book",children:Object(c.jsx)("h1",{children:"Limit Order Book v1"})}),Object(c.jsxs)(o.b,{children:[Object(c.jsx)(h,{orders:i,setOrders:a,buyers:u,setBuyers:d,sellers:f,setSellers:m,path:"/limit-order-book"}),Object(c.jsx)(P,{orders:i,path:"/"})]}),O,Object(c.jsx)("div",{className:"row"})]})},x=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,32)).then((function(e){var i=e.getCLS,c=e.getFID,n=e.getFCP,a=e.getLCP,r=e.getTTFB;i(t),c(t),n(t),a(t),r(t)}))};s.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root")),x()}},[[31,1,2]]]);
//# sourceMappingURL=main.dc7c9d7b.chunk.js.map